---
layout: post
title:  "Build a blog with GitHub and Jekyll"
date:   2020-01-21 23:49:04 +0800
categories: Jekyll
---
### Why choose Jekyll? 

[Jekyll](https://jekyllrb.com/) is simple and easy to use on different equipments. And GitHub Pages are powered by jekyll, so you can easily deploy your site using GitHub for free. 

 *I recommend you to use Linux to build it. Maybe there are some weird bugs, if you use Windows.* 

### Step 1. Prepare Ruby and Gem

[Ruby](https://www.ruby-lang.org/en/) is a programming language and Jekyll needs ruby to run. [Gem](https://rubygems.org/) is a ruby package management tool. 

```bash
# install ruby and rubygems
$ sudo pacman -S ruby rubygems
```

*You should install ruby, rubygems and git with the way that fits your system. And confirm that the necessary **environment variables** have been added.* 

```bash
# replace gem source
$ gem sources --remove https://rubygems.org/
$ gem sources --add https://gems.ruby-china.com/
```

### Step 2. Install Jekyll with Bundler

[Bundler](https://bundler.io/) provides a consistent environment for Ruby projects by tracking and installing the exact gems and versions that are needed. Use Jekyll with Bundler is easy and convenient. 

```bash
# install bundler, DON'T USE SUDO
$ gem install bundler
```

According to the message returned, I need to add `PATH=$PATH:/home/username/.gem/ruby/2.7.0/bin` to environment variables. Just edit `/etc/environment`. And don't forget following command. 

```bash
$ source /etc/environment
```

Build a project named `my-jekyll-website`. We can use bundler and [Gemfile](https://tosbourn.com/what-is-the-gemfile/) to manage it. 

```bash
# initialize bundler
$ mkdir my-jekyll-website
$ cd my-jekyll-website
$ bundle init
$ bundle config set path 'vendor/bundle'
```
Edit `Gemfile`, replace our project source with https://gems.ruby-china.com/ and save. 

```bash
# add jekyll
$ bundle add jekyll
# build new website in current file
$ bundle exec jekyll new --force --skip-bundle .
```
The source is changed by jekyll and we need to edit `Gemfile` again. 

```bash
$ bundle install
```
```bash
# serve the website and visit it at http://127.0.0.1:4000
$ bundle exec jekyll serve
```

If an error message like `rescue in parse_date': Invalid date '0000-00-00'` is returned, add `exclude: vendor/` in your `_config.yml`. 

We will push the whole folder to GitHub, but there are some files we don't want to show to others. We can edit `.gitignore` in the folder to solve that. 

```
# Ignore metadata generated by Jekyll
_site/
.sass-cache/
.jekyll-cache/
.jekyll-metadata

# Ignore folders generated by Bundler
.bundle/
vendor/
```

### Step 3. Build GitHub Repository

Sign in your [GitHub](https://github.com/login) account and create a new repository named `username.github.io` (replace `username` with yours). 

### Step 4. Use Git to Push your Website

```bash
# build git repository
$ git init
$ git add .
$ git commit -m "init commit"
```

Push the local repository to GitHub repository built in step 3. 

```bash
# replace username with yours
$ git remote add origin git@github.com:username/username.github.io.git
$ git push -u origin master
```

Wait a few minutes, open `https://username.github.io` to visit your initial blog. 

### Step 5. Daily Use

To create a post, add a file to your `_posts` directory with the following format:

```
YEAR-MONTH-DAY-title.markdown
```

There is a official file named like `YEAR-MONTH-DAY-welcome-to-jekyll.markdown` in `_post`, you can reference its format to write your file. Update your blog, after you have finished the new post file. 

```bash
# update blog
$ git add _posts/YEAR-MONTH-DAY-title.markdown
$ git commit -m "update YEAR-MONTH-DAY-title"
$ git push origin master
```

If you want to set theme such as [cayman-blog](https://github.com/lorepirri/cayman-blog), you can follow the operation on the theme's GitHub page.  And there are a lot you can customize, look up [official document](https://jekyllrb.com/docs/) to learn more. 

### Reference

https://pages.github.com/

https://jekyllrb.com/

https://www.liaoxuefeng.com/